<html>
<head>
<title> FIFA World Cup 2014 - Choose Your Own Adventure</title>
<link rel='stylesheet' href='world_cup.css' />
<link rel='stylesheet' href='tabs.css' />
<link rel='stylesheet' href='bracket.css' />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" ></script>
</head>
<body>
	<img class="border" id="top-left" src="borders/top-left.png">
	<img class="border" id="top-right" src="borders/top-right.png">
	<img class="border" id="bottom-left" src="borders/bottom-left.png">
	<img class="border" id="bottom-right" src="borders/bottom-right.png">
	<div id="header">
		<h1>2014 FIFA World Cup Brazil</h1>
		<p>Set or change match scores to see their effects on the table!</p>
	</div>
	<div class="tabs">
		<div class="tab-links">
			<div id="group-tab-links"></div>
			<div><a href="#Bracket">Knockout</a></div>
		</div>
		
		<div class="tab-content">
			<div id="group-tab-content"></div>
			<div id="Bracket" class="tab">
				<table border="0" cellpadding="0" cellspacing="0" style="font-size: 90%; margin:1em 2em 1em 1em;">
					<tr>
						<td class="hs"></td>
						<td class="round">Round of 16</td>
						<td colspan="2"></td>
						<td class="round">Quarter-finals</td>
						<td colspan="2"></td>
						<td class="round">Semi-finals</td>
						<td colspan="2"></td>
						<td class="round">Final</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td width="180">&#160;</td>
						<td width="15">&#160;</td>
						<td width="20">&#160;</td>
						<td width="180">&#160;</td>
						<td width="15">&#160;</td>
						<td width="20">&#160;</td>
						<td width="180">&#160;</td>
						<td width="15">&#160;</td>
						<td width="20">&#160;</td>
						<td width="180">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="4" class="line from-above">&#160;</td>
						<td rowspan="7" class="line from-above">&#160;</td>
						<td rowspan="3"></td>
						<td rowspan="7" class="line from-above">&#160;</td>
						<td rowspan="13" class="line from-above">&#160;</td>
						<td rowspan="9"></td>
						<td rowspan="13" class="line from-above">&#160;</td>
						<td rowspan="25" class="line from-above">&#160;</td>
						<td rowspan="21"></td>
					</tr>
					<tr>
						<td class="hs"></td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m0-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m0-t1">&#160;&#160;</td>
						<td rowspan="6" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r1-m0-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="12" class="line two-borders">&#160;</td>
						<td rowspan="2" class="team-cell" id="r1-m0-t1">&#160;&#160;</td>
						<td rowspan="12" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m1-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="6"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m1-t1">&#160;&#160;</td>
						<td rowspan="6" class="line two-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r2-m0-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="24" class="line two-borders">&#160;</td>
						<td rowspan="2" class="team-cell" id="r2-m0-t1">&#160;&#160;</td>
						<td rowspan="24" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m2-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="18"></td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m2-t1">&#160;&#160;</td>
						<td rowspan="6" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r1-m1-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="12" class="line two-borders">&#160;</td>
						<td rowspan="2" class="team-cell" id="r1-m1-t1">&#160;&#160;</td>
						<td rowspan="12" class="line two-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m3-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="6"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m3-t1">&#160;&#160;</td>
						<td rowspan="6" class="line two-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r3-m0-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="23" class="line from-below">&#160;</td>
						<td rowspan="2" class="team-cell" id="r3-m0-t1">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m4-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="10"></td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m4-t1">&#160;&#160;</td>
						<td rowspan="6" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r1-m2-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="12" class="line two-borders">&#160;</td>
						<td rowspan="2" class="team-cell" id="r1-m2-t1">&#160;&#160;</td>
						<td rowspan="12" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m5-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="6"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m5-t1">&#160;&#160;</td>
						<td rowspan="6" class="line two-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r2-m1-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="11" class="line from-below">&#160;</td>
						<td rowspan="2" class="team-cell" id="r2-m1-t1">&#160;&#160;</td>
						<td rowspan="11" class="line from-below">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m6-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="9"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m6-t1">&#160;&#160;</td>
						<td rowspan="6" class="line three-borders">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r1-m3-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="5" class="line from-below">&#160;</td>
						<td rowspan="2" class="team-cell" id="r1-m3-t1">&#160;&#160;</td>
						<td rowspan="5" class="line from-below">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m7-t0">&#160;&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2" class="team-cell" id="r0-m7-t1">&#160;&#160;</td>
						<td rowspan="2" class="line from-below">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
						<td rowspan="2">&#160;</td>
						<td rowspan="2">&#160;</td>
					</tr>
					<tr>
						<td class="hs"></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div id="buttons">
		<input type="button" id="save" value="Save scores"/>
		<input type="button" id="load" value="Load scores"/><br>
		<div class="tabbed-buttons">
			<div id="group-buttons">
				<input type="button" id="resetOne" value="Reset group to real scores"/>
				<input type="button" id="blankOne" value="Reset group to blank"/>
			</div>
			<div id="knockout-buttons">
				<input type="button" id="clearBracket" value="Reset all knockout matches"/>
			</div>
		</div>
		<input type="button" id="resetAll" value="Reset tournament to real scores"/>
		<input type="button" id="blankAll" value="Reset tournament to blank"/>
	</div>
	<script src="main.js"></script>
	<script src="bracket.js"></script>
	<script src="encodeUtils.js"></script>
	<script src="groupUtils.js"></script>
	<script src="group.js"></script>
	<script src="match.js"></script>
	<script src="team.js"></script>
	<script>
		var NAMES = ["Brazil", "Croatia", "Mexico", "Cameroon", "Spain", "Netherlands", "Chile", "Australia", "Colombia", "Greece", "Ivory Coast", "Japan", "Uruguay", "Costa Rica", "England", "Italy", "Switzerland", "Ecuador", "France", "Honduras", "Argentina", "Bosnia & Herz.", "Iran", "Nigeria", "Germany", "Portugal", "Ghana", "United States", "Belgium", "Algeria", "Russia", "Korea Republic"];
		var MATCH_DETAILS = [["Arena de Sao Paulo, Sao Paulo", [5,12,20,0]],["Arena das Dunas, Natal", [5,13,16,0]],["Arena Fonte Nova, Salvador", [5,13,19,0]],["Arena Pantanal, Cuiaba", [5,13,22,0]],["Estadio Mineirao, Belo Horizonte", [5,14,16,0]],["Arena Pernambuco, Recife", [5,15,1,0]],["Estadio Castelao, Fortaleza", [5,14,19,0]],["Arena Amazonia, Manaus", [5,14,22,0]],["Estadio Nacional Mane Garrincha, Brasilia", [5,15,16,0]],["Estadio Beira-Rio, Porto Alegre", [5,15,19,0]],["Estadio do Maracana, Rio de Janeiro", [5,15,22,0]],["Arena da Baixada, Curitiba", [5,16,19,0]],["Arena Fonte Nova, Salvador", [5,16,16,0]],["Arena das Dunas, Natal", [5,16,22,0]],["Estadio Mineirao, Belo Horizonte", [5,17,16,0]],["Arena Pantanal, Cuiaba", [5,17,22,0]],["Estadio Castelao, Fortaleza", [5,17,19,0]],["Arena Amazonia, Manaus", [5,18,22,0]],["Estadio do Maracana, Rio de Janeiro", [5,18,19,0]],["Estadio Beira-Rio, Porto Alegre", [5,18,16,0]],["Estadio Nacional Mane Garrincha, Brasilia", [5,19,16,0]],["Arena das Dunas, Natal", [5,19,22,0]],["Arena de Sao Paulo, Sao Paulo", [5,19,19,0]],["Arena Pernambuco, Recife", [5,20,16,0]],["Arena Fonte Nova, Salvador", [5,20,19,0]],["Arena da Baixada, Curitiba", [5,20,22,0]],["Estadio Mineirao, Belo Horizonte", [5,21,16,0]],["Arena Pantanal, Cuiaba", [5,21,22,0]],["Estadio Castelao, Fortaleza", [5,21,19,0]],["Arena Amazonia, Manaus", [5,22,22,0]],["Estadio do Maracana, Rio de Janeiro", [5,22,16,0]],["Estadio Beira-Rio, Porto Alegre", [5,22,19,0]],["Estadio Nacional Mane Garrincha, Brasilia", [5,23,20,0]],["Arena Pernambuco, Recife", [5,23,20,0]],["Arena da Baixada, Curitiba", [5,23,16,0]],["Arena de Sao Paulo, Sao Paulo", [5,23,16,0]],["Arena Pantanal, Cuiaba", [5,24,20,0]],["Estadio Castelao, Fortaleza", [5,24,20,0]],["Arena das Dunas, Natal", [5,24,16,0]],["Estadio Mineirao, Belo Horizonte", [5,24,16,0]],["Arena Amazonia, Manaus", [5,25,20,0]],["Estadio do Maracana, Rio de Janeiro", [5,25,20,0]],["Estadio Beira-Rio, Porto Alegre", [5,25,16,0]],["Arena Fonte Nova, Salvador", [5,26,16,0]],["Arena Pernambuco, Recife", [5,26,16,0]],["Estadio Nacional Mane Garrincha, Brasilia", [5,26,16,0]],["Arena de Sao Paulo, Sao Paulo", [5,26,20,0]],["Arena da Baixada, Curitiba", [5,26,20,0]]];
		var SCORES = 'N0O~P~rG!6.rAfP~y4gD^rQ.nJ{v46~6Evzj~vkQ+1CFH';
		Brazil2014.init(NAMES, MATCH_DETAILS, SCORES);
		
		$('.tabs #A').show();
		$('.tabs .tab-links a').first().parent('li').addClass('active');
		$('.tabbed-buttons #group-buttons').show();
		
        $('.tabs .tab-links a').on('click', function(e)  {
            var currentAttrValue = $(this).attr('href');
            
            if (currentAttrValue === "#Bracket") {
            	Brazil2014.populateBracket();
            	$('#knockout-buttons').show().siblings().hide();
            }
            else {
            	$('#group-buttons').show().siblings().hide();
            }
     
            // Show/Hide Tabs
            $('.tabs ' + currentAttrValue).show().siblings().hide();
     
            // Change/remove current tab to active
            $(this).parent('li').addClass('active').siblings().removeClass('active');
     
            e.preventDefault();
        });
		$(document).on('blur', '.score1, .score2', function() {
			var groupIndex = $(this).parents('.tab').attr('id').charCodeAt(0)-65;
			Brazil2014.groups[groupIndex].play($(this).parents(".matchRow").attr('class')[5], $(this).parent(".result").children(".score1").val(), $(this).parent(".result").children(".score2").val());
		});
		$("#buttons").on('click', "#save", function() {
			Brazil2014.save();
		});
		$("#buttons").on('click', "#load", function() {
			Brazil2014.load('');
		});
		$("#buttons").on('click', "#resetOne", function() {
			var g = $('.tabs .tab-links .active a').attr('href').charCodeAt(1)-65;
			Brazil2014.groups[g].load(Brazil2014.realScores.substring(g*12, g*12+12));
		});
		$("#buttons").on('click', "#resetAll", function() {
			Brazil2014.load(Brazil2014.realScores);
		});
		$("#buttons").on('click', "#blankOne", function() {
			var g = $('.tabs .tab-links .active a').attr('href').charCodeAt(1)-65;
			Brazil2014.groups[g].load('------------');
		});
		$("#buttons").on('click', "#blankAll", function() {
			Brazil2014.load('__');
		});
		$("#buttons").on('click', "#clearBracket", function() {
			Brazil2014.knockout.clear();
		});
		$("#Bracket").on('click', '.team-cell', function () {
			var idString = $(this).attr('id');
			var r = idString.charAt(1);
			var m = idString.charAt(4);
			var t = idString.charAt(7);
			var node = Brazil2014.knockout.nodeArr[r][m][t];
			var opponent = Brazil2014.knockout.nodeArr[r][m][1-t];
			if (node.hasWon()) {
				node.unWin();
			}
			else {
				opponent.unWin();
				node.win();
			}
		});
	</script>
</body>
</html>
